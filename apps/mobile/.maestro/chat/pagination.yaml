appId: com.blisko.app
---
# Task 30: Pagination (infinite scroll)
# Seeded user scrolls up through 60 messages to trigger pagination
# Seed mode: many (60 messages total, 30 from each user)
# Run via: ./run-test.sh pagination.yaml many

- runFlow: ../sub-flows/login-seeded.yaml

# Navigate to Czaty tab
- tapOn: "tab-chats"

# Open conversation
- extendedWaitUntil:
    visible:
      id: "conversation-row"
    timeout: 15000
- tapOn:
    id: "conversation-row"

# Wait for messages to load (FlatList is inverted, newest at bottom visually)
- extendedWaitUntil:
    visible:
      id: "message-list"
    timeout: 10000

# Scroll up repeatedly to load older messages
# FlatList is inverted so scrolling down in Maestro = scrolling to older messages
- repeat:
    times: 10
    commands:
      - swipe:
          direction: DOWN
          duration: 300
      - waitForAnimationToEnd

# Verify we can see one of the earliest messages
- assertVisible: ".*Wiadomosc od A numer 1.*"
